<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Générateur de JSON-LD - Multi-Type</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://unpkg.com/tippy.js@6/dist/tippy.css" rel="stylesheet"> <!-- Tippy.js CSS -->
</head>
<body>
    <div class="container my-5">
        <h1 class="text-center">Générateur de JSON-LD - Multi-Type</h1>
        <form id="schemaForm" class="my-4">
            <!-- Type Selector -->
            <div class="mb-3">
                <label for="type" class="form-label">Type Schema.org</label>
                <select id="type" class="form-select">
                    <option value="Brand" selected>Brand</option>
                    <option value="Product">Product</option>
                    <option value="Organization">Organization</option>
                    <option value="Event">Event</option>
                </select>
            </div>
            <!-- Form Fields -->
            <div id="formFields">
                <div class="mb-3">
                    <label for="name" class="form-label">Nom <span data-tippy-content="Nom principal de l'objet JSON-LD">?</span></label>
                    <input type="text" class="form-control" id="name" placeholder="Nom" required>
                </div>
                <div class="mb-3">
                    <label for="url" class="form-label">URL <span data-tippy-content="Lien vers la page de l'objet">?</span></label>
                    <input type="url" class="form-control" id="url" placeholder="https://www.example.com" required>
                </div>
            </div>
            <!-- Add Custom Field -->
            <div class="mb-3">
                <button type="button" class="btn btn-sm btn-outline-primary" onclick="addCustomField()">Ajouter un champ personnalisé</button>
            </div>
            <!-- Buttons -->
            <div class="d-flex justify-content-between">
                <button type="button" class="btn btn-primary" onclick="generateJSONLD()">Générer le script</button>
                <button type="button" class="btn btn-secondary" onclick="resetForm()">Effacer tout</button>
            </div>
        </form>

        <!-- JSON-LD Output -->
        <h2 class="text-center mt-5">Script JSON-LD généré</h2>
        <pre class="language-json"><code id="jsonldOutput" class="language-json"></code></pre>
        <button type="button" class="btn btn-secondary w-100 my-3" onclick="copyToClipboard()">Copier le script</button>

        <!-- SEO Impact -->
        <h3 class="text-center">Impact SEO</h3>
        <p id="seoImpact" class="text-center text-success">Les données structurées aident les moteurs de recherche à mieux comprendre le contenu de votre site, améliorant ainsi votre visibilité et vos rich snippets.</p>
    </div>

    <script src="https://unpkg.com/tippy.js@6"></script> <!-- Tippy.js JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script> <!-- Prism.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-json.min.js"></script> <!-- Prism.js JSON -->
    <script>
        document.addEventListener("DOMContentLoaded", () => {
            tippy('[data-tippy-content]'); // Initialize Tippy.js tooltips
        });

        function resetForm() {
            document.getElementById('schemaForm').reset();
            document.getElementById('jsonldOutput').textContent = '';
        }

        function addCustomField() {
            const formFields = document.getElementById('formFields');
            const newField = document.createElement('div');
            newField.className = 'mb-3';
            newField.innerHTML = `
                <label class="form-label">Champ personnalisé <span data-tippy-content="Ajoutez une clé et une valeur au format JSON">?</span></label>
                <div class="input-group">
                    <input type="text" class="form-control" placeholder="Nom du champ" required>
                    <input type="text" class="form-control" placeholder="Valeur du champ" required>
                </div>
            `;
            formFields.appendChild(newField);
            tippy('[data-tippy-content]');
        }

        function generateJSONLD() {
            const type = document.getElementById('type').value;
            const name = document.getElementById('name').value;
            const url = document.getElementById('url').value;

            const jsonld = {
                "@context": "https://schema.org",
                "@type": type,
                name: name,
                url: url,
            };

            // Add custom fields
            const customFields = document.querySelectorAll('#formFields .input-group');
            customFields.forEach(field => {
                const key = field.children[0].value;
                const value = field.children[1].value;
                if (key && value) {
                    jsonld[key] = value;
                }
            });

            const cleanedJsonld = JSON.stringify(jsonld, null, 2);

            // Display JSON-LD
            const jsonldOutput = document.getElementById('jsonldOutput');
            jsonldOutput.textContent = cleanedJsonld;
            Prism.highlightElement(jsonldOutput);
        }

        function copyToClipboard() {
            const jsonldOutput = document.getElementById('jsonldOutput');
            navigator.clipboard.writeText(jsonldOutput.textContent).then(() => {
                alert('Le script JSON-LD a été copié dans le presse-papier.');
            });
        }
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>